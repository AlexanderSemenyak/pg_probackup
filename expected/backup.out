\! bash sql/backup.sh
###### BACKUP COMMAND TEST-0001 ######
###### full backup mode ######
NOTICE:  pg_stop_backup complete, all required WAL segments have been archived
0
1
3
###### BACKUP COMMAND TEST-0002 ######
###### page-level backup mode ######
NOTICE:  pg_stop_backup complete, all required WAL segments have been archived
0
2
6
###### BACKUP COMMAND TEST-0003 ######
###### full backup with compression ######
NOTICE:  pg_stop_backup complete, all required WAL segments have been archived
0
1
0
3
###### BACKUP COMMAND TEST-0004 ######
###### full backup with smooth checkpoint ######
NOTICE:  pg_stop_backup complete, all required WAL segments have been archived
0
1
3
###### BACKUP COMMAND TEST-0005 ######
###### full backup with keep-data-generations and keep-data-days ######
NOTICE:  pg_stop_backup complete, all required WAL segments have been archived
0
NOTICE:  pg_stop_backup complete, all required WAL segments have been archived
0
NOTICE:  pg_stop_backup complete, all required WAL segments have been archived
0
The number of existing full backups validated is greater than 2.
OK. Let's try to test --keep-data-generations=1.
9
NOTICE:  pg_stop_backup complete, all required WAL segments have been archived
0
Number of remaining full backups validated: 2
Number of deleted backups : 2
6
###### BACKUP COMMAND TEST-0006 ######
###### switch backup mode from page to full ######
page-level backup without validated full backup
INFO: database backup start
ERROR: Valid full backup not found for differential backup. Either create a full backup or validate existing one.
10
0
0
